@model Student_Section_ManagementSystemProject.Models.Schedule
@{
    ViewData["Title"] = "Enroll Students";
}

<h2>Enroll Student in Available Schedules</h2>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">@TempData["SuccessMessage"]</div>
}
@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
}

<form asp-controller="Enrollment" asp-action="EnrollMultiple" method="post">
    <div class="form-group">
        <label for="studentId">Select Student</label>
        <select name="studentId" class="form-control" asp-items="ViewBag.Students">
            <option value="">-- Select a Student --</option>
        </select>
    </div>

    <h3>Select Schedules</h3>

    @if (ViewBag.Schedules != null && ViewBag.Schedules.Count > 0)
    {
        @foreach (var schedule in ViewBag.Schedules)
        {
            <div class="form-check">
                <input type="checkbox" name="scheduleIds" value="@schedule.Id" class="form-check-input" id="schedule_@schedule.Id" />
                <label class="form-check-label" for="schedule_@schedule.Id">
                    @schedule.Subject.Name (@schedule.Capacity - @schedule.Enrollments.Count slots left)
                </label>
            </div>
        }
    }
    else
    {
        <p class="text-danger">⚠ No available schedules for enrollment.</p>
    }

    <button type="submit" class="btn btn-primary mt-2">Enroll</button>
</form>